<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>99ä¹˜æ³•è€ƒè©¦</title>

<style>
body{
 margin:0;
 font-family:"Arial Rounded MT Bold",system-ui;
 background:linear-gradient(135deg,#fff0f6,#e0f7ff);
 text-align:center;
}
.container{
 max-width:420px;
 margin:auto;
 padding:20px;
}
h1{color:#ff6fae;}
.question{font-size:36px;margin:20px 0;}
.timer{font-size:28px;color:#ff5252;}
.progress{font-size:18px;margin:10px;}
.keypad{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:12px;
 margin-top:20px;
}
button{
 font-size:22px;
 padding:16px;
 border:none;
 border-radius:14px;
 background:#fff;
 box-shadow:0 4px 8px rgba(0,0,0,.15);
}
button:active{transform:scale(.95);}
.start-btn{background:#ff8fc7;color:#fff;font-size:26px;}

.modal{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.4);
 display:flex;
 align-items:center;
 justify-content:center;
}
.card{
 background:#fff;
 border-radius:20px;
 padding:20px;
 width:90%;
 max-width:400px;
}
.score{font-size:30px;color:#ff6fae;}
.avg{font-size:20px;margin:10px 0;}
.wrong{color:red;font-size:20px;margin:6px 0;}
</style>
</head>

<body>
<div class="container" id="main">
 <h1>99ä¹˜æ³•è€ƒè©¦</h1>
 <button class="start-btn" onclick="start()">é–‹å§‹æ¸¬é©—</button>
</div>

<div class="modal" id="result" style="display:none">
 <div class="card">
  <div class="score" id="score"></div>
  <div class="avg" id="avg"></div>
  <button onclick="showWrong()">æŸ¥çœ‹éŒ¯èª¤æ˜ç´°</button><br><br>
  <button onclick="restart()">é‡æ–°æ¸¬é©—</button>
 </div>
</div>

<div class="modal" id="wrongPage" style="display:none">
 <div class="card">
  <h2>éŒ¯èª¤æ˜ç´°</h2>
  <div id="wrongList"></div>
  <br>
  <button onclick="backToResult()">è¿”å›æˆç¸¾</button>
 </div>
</div>

<script>
let total=30,idx=0,a,b,correct=0;
let wrongs=[],times=[],startTime;

function start(){
 idx=0;correct=0;wrongs=[];times=[];
 next();
}

function next(){
 if(idx>=total){finish();return;}
 idx++;
 a=Math.floor(Math.random()*9)+1;
 b=Math.floor(Math.random()*9)+1;
 startTime=Date.now();
 const ans=prompt(`${a} Ã— ${b} = ?`);
 if(ans==a*b){
  correct++;
  times.push((Date.now()-startTime)/1000);
 }else{
  wrongs.push(`${a} Ã— ${b} = ${a*b}`);
 }
 next();
}

function finish(){
 document.getElementById("result").style.display="flex";
 document.getElementById("score").textContent=`æˆç¸¾ï¼š${correct} / ${total}`;
 const avg=times.length?(times.reduce((a,b)=>a+b)/times.length).toFixed(1):0;
 document.getElementById("avg").textContent=`å¹³å‡ä½œç­”æ™‚é–“ï¼š${avg} ç§’`;
}

function showWrong(){
 document.getElementById("result").style.display="none";
 document.getElementById("wrongPage").style.display="flex";
 document.getElementById("wrongList").innerHTML=
  wrongs.length?wrongs.map(x=>`<div class="wrong">${x}</div>`).join(""):"æ²’æœ‰éŒ¯èª¤ ğŸ‰";
}

function backToResult(){
 document.getElementById("wrongPage").style.display="none";
 document.getElementById("result").style.display="flex";
}

function restart(){location.reload();}
</script>
</body>
</html>
